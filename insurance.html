<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<title>SnowFun滑雪趣 - 投保畫面</title>
		<link
			href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
			rel="stylesheet"
			integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
			crossorigin="anonymous"
		/>
		<link
			rel="stylesheet"
			href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"
		/>
		<link
			rel="stylesheet"
			type="text/css"
			href="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.css"
		/>

		<link
			rel="stylesheet"
			href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.theme.default.css"
		/>
		<link
			rel="stylesheet"
			href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.carousel.min.css"
		/>
		<!-- font -->
		<link
			rel="stylesheet"
			href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/fontawesome.min.css"
		/>
		<link rel="preconnect" href="https://fonts.googleapis.com" />
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
		<link
			href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@100..900&display=swap"
			rel="stylesheet"
		/>
		<link
			href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@100..900&family=Noto+Serif+JP:wght@200..900&display=swap"
			rel="stylesheet"
		/>

		<link href="./style/layout.css" rel="stylesheet" />
		<link href="./style/index.css" rel="stylesheet" />
		<link href="./style/insurance.css" rel="stylesheet" />
	</head>
	<body class="insurance">
		<main class="max-w-920 mx-auto">
			<div class="alert alert-danger lh-base" role="alert">
				請於課前72小時填妥正確資料送出，否則視同已自行購買保險，放棄贈送選項
			</div>
			<div class="content border-gray rounded-4">
				<div class="w-100 f20 f-gray-dark bg_blue_light p-3">
					訂單編號 #12345666
				</div>
				<div class="w-100">
					<div class="content p-4">
						<div class="d-flex gap-1">
							<input
								id="C1"
								type="checkbox"
								aria-label="Checkbox for following text input mr-2"
							/>
							<label for="C1" class="f16 f-b f-gray-dark lh-base"
								>「我確認本訂單符合贈送保險之學員，滿足以下所有條件。」</label
							>
						</div>
						<ul class="mt-4 f-gray-light f13">
							<li>出發地：本次行程之出發地為台灣。</li>
							<li>
								未購買國泰旅平險：同家保險公司無法重複加保；若已購買，本網站贈送之特定活動險將無法生效。
							</li>
						</ul>
					</div>
				</div>
				<div class="w-100 member p-4 pt-0">
					<hr class="mt-0 mb-4" />
					<div
						class="title d-flex justify-content-between align-items-center mb-2"
					>
						<span class="f20">成員1</span>
						<button
							type="button"
							class="btn btn-outline-secondary d-flex align-items-center f14 gap-1 add-member"
						>
							<img src="/images/add.svg" alt="" />
							增加成員
						</button>
					</div>
					<form>
						<div class="form-row d-flex gap-3 mb-3">
							<div class="form-group w-50">
								<label class="mb-2" for="inputName">姓名</label>
								<input
									type="text"
									class="form-control"
									id="inputName"
									placeholder="請輸入姓名"
								/>
							</div>
							<div class="form-group w-50">
								<label class="mb-2" for="inputID">身分證字號</label>
								<input
									type="text"
									class="form-control"
									id="inputID"
									placeholder="請輸入身分證字號"
								/>
							</div>
						</div>
						<div class="form-row d-flex gap-3 mb-3">
							<div class="form-group w-50" style="height: 66px;">
								<label class="mb-2" for="inputDate">生日(年/月/日)</label>
								<input
									type="text"
									class="form-control"
									id="inputDate"
									placeholder="請選擇生日"
									onclick="toggleDisplay()"
								/>
								<!-- date -->
								<div class="collapse position-relative" id="collapseSelectDate">
									<div class="card position-absolute w-100 z-3">
										<div class="card-body pt-0">
											<div class="calendar-container">
												<a href="javascript:;" id="prev-month" class="btn"></a>
												<a href="javascript:;" id="next-month" class="btn"></a>
												<a href="javascript:;" id="prev-year" class="btn"></a>
												<a href="javascript:;" id="next-year" class="btn"></a>
												<div id="calendar-left" class="calendar"></div>
												<div id="calendar-right" class="calendar"></div>
											</div>
										</div>
									</div>
								</div>
							</div>
							<div class="form-group w-50">
								<label class="mb-2" for="inputPhone">聯絡手機</label>
								<input
									type="tel"
									class="form-control"
									id="inputPhone"
									placeholder="請輸入聯絡手機"
								/>
							</div>
						</div>
						<div class="form-row d-flex flex-column ">
							<label class="mb-2" for="inputAddress">聯絡地址</label>
							<input
								type="tel"
								class="form-control"
								id="inputAddress"
								placeholder="請輸入聯絡地址"
							/>
						</div>
					</form>
				</div>
				<div class="w-100 p-4 pt-0">
					<hr class="mb-4 mt-2" />
					<label class="mb-2" for="inputAddress">本次訂單代表人電子簽名</label>
					<div
						class="w-100 rounded-2 border border-1 bg-light"
						style="height: 150px;"
					>
						<div class="js-signature"></div>
					</div>
					<div class="d-flex mt-4 gap-1">
						<input
							id="C1"
							type="checkbox"
							aria-label="Checkbox for following text input"
						/>
						<label for="C1" class="f16 f-b f-gray-dark lh-base"
							>我已詳閱
							<a href="#" class="text-primary"
								>國泰產物特定活動綜合保險條款</a
							></label
						>
					</div>
				</div>
			</div>
			<div class="d-block d-md-flex justify-content-between text-center my-4">
				<div class="d-flex gap-16px">
					<button
						type="submit"
						class="btn border-0 btn-primary px-4 rounded-5 f18 line35 fw-bold mb-3"
					>
						儲存
					</button>
					<button
						type="submit"
						class="btn btn-outline-secondary px-4 rounded-5 f18 line35 f-gray-dark fw-bold mb-3"
					>
						取消
					</button>
				</div>
				<div class="d-flex justify-content-end">
					<button
						type="submit"
						class="btn border-0 btn-primary px-4 rounded-5 f18 line35 fw-bold mb-3 d-flex align-items-center gap-1"
						onclick="window.location='insurance_02.html'"
					>
						送出資料
						<img src="/images/solar_arrow-up-broken.svg" alt="" />
					</button>
				</div>
			</div>
		</main>

		<!-- Optional JavaScript -->
		<!-- jQuery first, then Popper.js, then Bootstrap JS -->
		<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
		<script
			type="text/javascript"
			src="https://cdn.jsdelivr.net/momentjs/latest/moment.min.js"
		></script>
		<!-- <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.min.js"></script> -->
		<script
			src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"
			integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p"
			crossorigin="anonymous"
		></script>
		<script
			src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js"
			integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF"
			crossorigin="anonymous"
		></script>

		<script src="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/owl.carousel.min.js"></script>
		<script src="js/owl.js"></script>

		<!-- <script src="./js/date_insurance.js"></script> -->
		<script src="./js/selectPlace.js"></script>
		<script src="./js/jqSignature.js"></script>

		<!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script> -->
		<!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/owl.carousel.min.js"></script> -->

		<!-- 燈箱 function -->
		<script>
			var isListeningForResize = false;
			let currentDate = new Date();
			const weekDays = ["日", "一", "二", "三", "四", "五", "六"];
			const coachDates = [
				"2024-08-16",
				"2024-08-17",
				"2024-08-18",
				"2024-08-19",
			];

			updateCalendar();

			$("#prev-month").click(function() {
				currentDate.setMonth(currentDate.getMonth() - 1);
				updateCalendar();
			});

			$("#next-month").click(function() {
				currentDate.setMonth(currentDate.getMonth() + 1);
				updateCalendar();
			});

			$("#prev-year").click(function() {
				currentDate.setFullYear(currentDate.getFullYear() - 1);
				updateCalendar();
			});

			$("#next-year").click(function() {
				currentDate.setFullYear(currentDate.getFullYear() + 1);
				updateCalendar();
			});

			function renderCalendar(calendarId, year, month) {
				let date = new Date(year, month, 1);
				let daysInMonth = new Date(year, month + 1, 0).getDate();
				let firstDayOfWeek = new Date(year, month, 1).getDay();

				let html = `<table class="table calendar-table"><thead><tr><th colspan="7">${year}年 ${date.toLocaleString(
					"default",
					{ month: "long" }
				)}</th></tr><tr>`;
				weekDays.forEach((day) => {
					html += `<th>${day}</th>`;
				});
				html += `</tr></thead><tbody><tr>`;

				for (let i = 0; i < firstDayOfWeek; i++) {
					html += "<td></td>";
				}

				for (let day = 1; day <= daysInMonth; day++) {
					let fullDate = new Date(year, month, day);
					let dateString = `${fullDate.getFullYear()}-${(
						"0" +
						(fullDate.getMonth() + 1)
					).slice(-2)}-${("0" + fullDate.getDate()).slice(-2)}`;
					let isCoachDate = coachDates.includes(dateString)
						? " coach-date"
						: "";
					if ((day + firstDayOfWeek - 1) % 7 === 0 && day > 1) {
						html += "</tr><tr>";
					}
					html += `<td class="calendar-day${isCoachDate}" data-date="${dateString}">${day}</td>`;
				}

				for (let i = (firstDayOfWeek + daysInMonth - 1) % 7; i < 6; i++) {
					html += "<td></td>";
				}
				html += "</tr></tbody></table>";
				$("#" + calendarId).html(html);

				// 添加點擊事件至每個日期
				$(".calendar-day").click(function() {
					var $this = $(this);
					$this.addClass("active");
					let selectedDate = $this.data("date"); // 從data-date屬性獲取日期
					selectedDate = selectedDate.replace(/-/g, "/"); // 將日期格式由"年-月-日"改為"年/月/日"
					$("#inputDate").val(selectedDate); // 將選擇的日期填充到輸入框中

					setTimeout(function() {
						$("#selectDateModal").modal("hide");
						$("#collapseSelectDate").collapse("hide");
						$this.removeClass("active");
					}, 200);
				});
			}

			function updateCalendar() {
				renderCalendar(
					"calendar-left",
					currentDate.getFullYear(),
					currentDate.getMonth()
				);
			}

			function toggleDisplay() {
				if ($(window).width() <= 992) {
					$("#selectDateModal").modal("show");
				} else {
					$("#collapseSelectDate").collapse("show");
				}

				if (!isListeningForResize) {
					isListeningForResize = true;
					$(window).resize(function() {
						if ($("#collapseSelectDate").hasClass("show")) {
							toggleDisplay();
						}
					});
				}
			}
			$(function() {
				$(".js-signature").jqSignature({
					autoFit: true,
					height: 150,
					border: "none",
					background: "#f5f5f5",
				});
				$("[rel='tooltip']").tooltip();
				$(window).on("resize", function() {
					location.reload();
				});
			});
		</script>
	</body>
</html>
